extends ../layout/common
block content
    h1.text-center.projTitle Products List
    - var perpage = 3;
    - var numRow = 2;
    - var n = 0;
    form.ml-auto.search(action="/products/search",method="GET",class="form-group d-flex")
            input.searchInput(type="text", name="p",class="form-control" )
            button.searchBtn(class="btn btn-info ml-2") Search
    while n < numRow
        - n++
            - var idRow = n;
            - var firstProduct = (idRow-1) * 3;
            - var lastProduct = (idRow-1)*3 + 3;
            - var productInRow = products.slice(firstProduct, lastProduct);
            .row(id=n)
                each product in productInRow   
                    //- .col-lg-4.p-3
                    //-     .card.wow.bounceInUp(class='text-center',style='width: 18rem;')
                    //-         img.card-img-top(src=`${product.image}` alt='')
                    //-         .card-body
                    //-             h4.card-title=product.name
                    //-             p.card-text=product.description
                    //-             .d-flex.justify-content-between.align-items-center
                    //-                 .btn-group.p-0
                    //-                     a.btn.btn-outline-success(href=`/cart/add/${product.id}`) Add to cart
                    //-                 h3.mb-0.ml-2
                    //-                     span.badge.badge-pill.badge-warning=`$${product.price}`
                    //-                 //- btn.badge.badge-light(href='#')=`$${product.price}`
                    .col-md-4.p-4.d-flex.justify-content-center.wow.lightSpeedIn
                        .card.border-white(style='width: 18rem;')
                            img.card-img-top(src=product.image alt='img')
                            .card-body.text-center
                                h6.card-title=product.name
                                .pro-rating
                                    a(href="#")
                                        i.zmdi.zmdi-star
                                    a(href="#")
                                        i.zmdi.zmdi-star
                                    a(href="#")
                                        i.zmdi.zmdi-star
                                    a(href="#")
                                        i.zmdi.zmdi-star-half
                                    a(href="#")
                                        i.zmdi.zmdi-star-outline
                                p.big.card-text $ #{product.price}.00
                                .icon.d-flex.justify-content-center
                                    ul.action-button.list-unstyled.p-0.d-flex
                                        li
                                            a(href='#')
                                                i.zmdi.zmdi-favorite
                                        li
                                            a(href=`/products/${product.id}`)
                                                i.zmdi.zmdi-zoom-in
                                        li
                                            a(href='#')
                                                i.zmdi.zmdi-refresh
                                        li
                                            a(href=`/cart/add/${product.id}`)
                                                i.zmdi.zmdi-shopping-cart-plus
    if productsLength > 0
        ul.pagination.justify-content-center.mt-5.p-5
            if currentPage == 1
                li.page-item.disabled
                    a.page-link(href=`${searchParams ?`search?p=${searchParams}&`:`?`}page=1`, tabindex='-1') First
            else    
                li.page-item
                    a.page-link(href=`${searchParams ?`search?p=${searchParams}&`:`?`}page=1`, tabindex='-1') First
            - var i = (Number(currentPage) > 5 ? Number(currentPage) - 4: 1); //- 1 > 5 ? 6 - 4 : 1 
            if i !== 1
                li.page-item.disabled
                    a.page-link ...
            - for(; i <= (Number(currentPage) + 4) && i <= productsLength; i++)
                if i == currentPage
                    li.page-item.active
                        a.page-link #{i}
                else
                    li.page-item
                        a.page-link(href=`${searchParams ?`search?p=${searchParams}&`:`?`}page=${i}`) #{i}
                if (i == Number(currentPage) + 4 && i < productsLength)
                    li.page-item.disabled   
                        a.page-link ...  
            if (currentPage == productsLength)
                li.page-item.disabled
                    a.page-link Last
            else
                li.page-item
                    a.page-link(href=`${searchParams ?`search?p=${searchParams}&`:`?`}page=${productsLength}`) Last             